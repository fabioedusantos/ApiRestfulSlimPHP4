openapi: 3.0.0
info:
  title: 'API Default'
  description: "Documentação da API Default.\r\n<br><br>\r\n**NOTA ESSENCIAL (Modo DEV):** A funcionalidade de **bypass** do **Google reCAPTCHA** presente neste projeto, só será \r\nativada se a variável de ambiente no arquivo `store/.env` estiver configurada como `APP_ENV=\\\"DEV\\\"`. Se essa \r\nespecificação não for atendida, todos os *endpoints* protegidos (que esperam recaptchaToken e recaptchaSiteKey no body) \r\nrejeitarão as requisições sem um **token** Google reCAPTCHA válido.\r\n<br><br>\r\n**REQUISITO TÉCNICO (Firebase):** As rotas de `/google` deste projeto exigem um **`idTokenFirebase`** (JWT) válido, que \r\nsó pode ser obtido através da autenticação bem-sucedida do usuário no **front-end** via SDK do Google Firebase.\r\n<br><br><br>\r\n**Sobre o Desenvolvedor:**\r\n<br>\r\n* **Email:** fabioedusantos@gmail.com\r\n<br>\r\n* **Website:** [fbsantos.com.br](https://fbsantos.com.br)\r\n<br>\r\n* **LinkedIn:** [fabioedusantos](https://www.linkedin.com/in/fabioedusantos/)"
  version: 1.0.0
servers:
  -
    url: 'https://localhost'
    description: 'Servidor local'
paths:
  /auth/signup:
    post:
      tags:
        - Auth
      summary: 'Realiza a criação de conta de usuário com conta padrão (email e senha)'
      description: 'Endpoint responsável por realizar a criação de conta de usuário e enviar um e-mail com o código de confirmação para autorizar a conta'
      operationId: 32341302ad2b488cb017664b2eb59659
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - lastname
                - email
                - password
                - isTerms
                - isPolicy
                - recaptchaToken
                - recaptchaSiteKey
              properties:
                name:
                  description: 'Nome do usuário'
                  type: string
                lastname:
                  description: 'Sobrenome do usuário'
                  type: string
                email:
                  description: 'Email do usuário'
                  type: string
                  format: email
                password:
                  description: 'Senha do usuário'
                  type: string
                isTerms:
                  description: 'Aceito os termos da aplicação'
                  type: boolean
                isPolicy:
                  description: 'Aceito a política de privacidade da aplicação'
                  type: boolean
                recaptchaToken:
                  description: 'Token do Google reCAPTCHA'
                  type: string
                recaptchaSiteKey:
                  description: 'Site key do Google reCAPTCHA'
                  type: string
              type: object
      responses:
        '201':
          description: 'Criação bem sucedida'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Se o e-mail informado estiver correto, você receberá em breve as instruções para confirmar sua conta.\",\r\n                        \"data\": {\r\n                            \"expirationInHours\": 2\r\n                        }\r\n                    }"
  /auth/resend_confirm_email:
    post:
      tags:
        - Auth
      summary: 'Realiza o reenvio do código de confirmação de conta padrão (email e senha) por e-mail'
      description: 'Endpoint responsável por realizar o envio do novo código de confirmação de conta padrão por e-mail.'
      operationId: 17ee5da29c7f815c6c2e4032ad5271a9
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - email
                - recaptchaToken
                - recaptchaSiteKey
              properties:
                email:
                  description: 'Email do usuário'
                  type: string
                  format: email
                recaptchaToken:
                  description: 'Token do Google reCAPTCHA'
                  type: string
                recaptchaSiteKey:
                  description: 'Site key do Google reCAPTCHA'
                  type: string
              type: object
      responses:
        '200':
          description: 'Código de confirmação enviado com sucesso'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Se o e-mail informado estiver correto, você receberá em breve as instruções para redefinir sua senha.\",\r\n                        \"data\": {\r\n                            \"expirationInHours\": 2\r\n                        }\r\n                    }"
  /auth/check_reset_code:
    post:
      tags:
        - Auth
      summary: 'Realiza a checagem se o código de redefinição de senha ou ativação de conta padrão (email e senha) está ativo'
      description: 'Realiza a checagem se o código de redefinição de senha ou ativação de conta padrão (email e senha) está ativo. Este endpoint faz parte do ciclo de redefinição de senha a ação iniciada por /auth/forgot_password.'
      operationId: 930bb9e0c1bd40191dd6bc5ef4c72dbf
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - email
                - code
                - recaptchaToken
                - recaptchaSiteKey
              properties:
                email:
                  description: 'Email do usuário'
                  type: string
                  format: email
                code:
                  description: 'Código de redefinição de senha enviado no e-mail do usuário'
                  type: string
                recaptchaToken:
                  description: 'Token do Google reCAPTCHA'
                  type: string
                recaptchaSiteKey:
                  description: 'Site key do Google reCAPTCHA'
                  type: string
              type: object
      responses:
        '200':
          description: 'Código ativo'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Código ativo.\"\r\n                    }"
  /auth/confirm_email:
    post:
      tags:
        - Auth
      summary: 'Realiza a ativação de conta padrão (email e senha)'
      description: 'Endpoint responsável por realizar a ativação de conta padrão através do código enviado por e-mail. Este endpoint conclui a ação iniciada por /auth/signup.'
      operationId: d38314d4d7aed47d9c90c162c951945c
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - email
                - code
                - recaptchaToken
                - recaptchaSiteKey
              properties:
                email:
                  description: 'Email do usuário'
                  type: string
                  format: email
                code:
                  description: 'Código de ativação de conta enviado no e-mail do usuário'
                  type: string
                recaptchaToken:
                  description: 'Token do Google reCAPTCHA'
                  type: string
                recaptchaSiteKey:
                  description: 'Site key do Google reCAPTCHA'
                  type: string
              type: object
      responses:
        '204':
          description: 'Conta ativada com sucesso'
  /auth/forgot_password:
    post:
      tags:
        - Auth
      summary: 'Realiza o envio do código de redefinição de senha de conta padrão (email e senha) por e-mail'
      description: 'Endpoint responsável por realizar o envio código de redefinição de senha de conta padrão por e-mail'
      operationId: cda235a8950fe1198e8ffda4fb8dae0f
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - email
                - recaptchaToken
                - recaptchaSiteKey
              properties:
                email:
                  description: 'Email do usuário'
                  type: string
                  format: email
                recaptchaToken:
                  description: 'Token do Google reCAPTCHA'
                  type: string
                recaptchaSiteKey:
                  description: 'Site key do Google reCAPTCHA'
                  type: string
              type: object
      responses:
        '200':
          description: 'Código de confirmação enviado com sucesso'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Se o e-mail informado estiver correto, você receberá em breve as instruções para redefinir sua senha.\",\r\n                        \"data\": {\r\n                            \"expirationInHours\": 2\r\n                        }\r\n                    }"
  /auth/reset_password:
    post:
      tags:
        - Auth
      summary: 'Realiza a alteração de senha de conta padrão (email e senha)'
      description: 'Endpoint responsável por realizar a alteração de senha de conta padrão. Este endpoint conclui a ação iniciada por /auth/forgot_password.'
      operationId: 4ac1499a22a6cfb321c14fc6632191e5
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - email
                - code
                - password
                - recaptchaToken
                - recaptchaSiteKey
              properties:
                email:
                  description: 'Email do usuário'
                  type: string
                  format: email
                code:
                  description: 'Código de redefinição de senha enviado no e-mail do usuário'
                  type: string
                password:
                  description: 'Nova senha do usuário'
                  type: string
                recaptchaToken:
                  description: 'Token do Google reCAPTCHA'
                  type: string
                recaptchaSiteKey:
                  description: 'Site key do Google reCAPTCHA'
                  type: string
              type: object
      responses:
        '204':
          description: 'Senha redefinida com sucesso'
  /auth/login:
    post:
      tags:
        - Auth
      summary: 'Realiza o login do usuário com conta padrão (email e senha)'
      description: 'Endpoint responsável por realizar o login e retornar um token de autenticação'
      operationId: 363e422b5a8c763fa1ea6fd03a77481d
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - email
                - password
                - recaptchaToken
                - recaptchaSiteKey
              properties:
                email:
                  description: 'Email do usuário'
                  type: string
                  format: email
                password:
                  description: 'Senha do usuário'
                  type: string
                recaptchaToken:
                  description: 'Token do Google reCAPTCHA'
                  type: string
                recaptchaSiteKey:
                  description: 'Site key do Google reCAPTCHA'
                  type: string
              type: object
      responses:
        '200':
          description: 'Login bem sucedido'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Login realizado com sucesso.\",\r\n                        \"data\": {\r\n                            \"token\": \"string-com-token-de-autenticacao\",\r\n                            \"refreshToken\": \"string-com-token-de-atualizacao\"\r\n                        }\r\n                    }"
  /auth/refresh_token:
    post:
      tags:
        - Auth
      summary: 'Realiza a atualização do token do usuário utilizando o refreshToken'
      description: 'Endpoint responsável por realizar a atualização do token do usuário e retornar um novo token de autenticação'
      operationId: 70992819d51c02efa6834af81d7d91e0
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - refreshToken
              properties:
                refreshToken:
                  description: 'RefreshToken do usuário'
                  type: string
              type: object
      responses:
        '200':
          description: 'Atualização do token bem sucedida'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Token atualizado realizado com sucesso.\",\r\n                        \"data\": {\r\n                            \"token\": \"string-com-token-de-autenticacao\",\r\n                            \"refreshToken\": \"string-com-token-de-atualizacao\"\r\n                        }\r\n                    }"
  /auth/is_logged_in:
    get:
      tags:
        - Auth
      summary: 'Realiza a checagem se o usuário está autenticado e seu token é válido'
      description: 'Realiza a checagem se o usuário está autenticado e seu token é válido, se tudo correr bem atualiza o seu último acesso.'
      operationId: 3ccfdc3d154f064815eb9060051e7480
      responses:
        '204':
          description: 'Conta autenticada e token ativo'
      security:
        -
          BearerAuth: []
  /auth/google/signup:
    post:
      tags:
        - Auth
      summary: 'Realiza a criação de conta de usuário com conta Google/Firebase'
      description: 'Endpoint responsável por realizar a criação de conta de usuário Google/Firebase já ativada e autenticada (token de login)'
      operationId: eaf730920be864093a8d7178c436234a
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - idTokenFirebase
                - name
                - lastname
                - isTerms
                - isPolicy
                - recaptchaToken
                - recaptchaSiteKey
              properties:
                idTokenFirebase:
                  description: 'Token Firebase do usuário'
                  type: string
                name:
                  description: 'Nome do usuário'
                  type: string
                lastname:
                  description: 'Sobrenome do usuário'
                  type: string
                isTerms:
                  description: 'Aceito os termos da aplicação'
                  type: boolean
                isPolicy:
                  description: 'Aceito a política de privacidade da aplicação'
                  type: boolean
                recaptchaToken:
                  description: 'Token do Google reCAPTCHA'
                  type: string
                recaptchaSiteKey:
                  description: 'Site key do Google reCAPTCHA'
                  type: string
              type: object
      responses:
        '201':
          description: 'Criação bem sucedida'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Conta criada e logada com sucesso.\",\r\n                        \"data\": {\r\n                            \"token\": \"string-com-token-de-autenticacao\",\r\n                            \"refreshToken\": \"string-com-token-de-atualizacao\"\r\n                        }\r\n                    }"
  /auth/google/login:
    post:
      tags:
        - Auth
      summary: 'Realiza o login do usuário com conta Google/Firebase'
      description: 'Endpoint responsável por realizar o login e retornar um token de autenticação'
      operationId: da1306281926d9b568b5c43a5c50fe64
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - idTokenFirebase
                - recaptchaToken
                - recaptchaSiteKey
              properties:
                idTokenFirebase:
                  description: 'Token Firebase do usuário'
                  type: string
                recaptchaToken:
                  description: 'Token do Google reCAPTCHA'
                  type: string
                recaptchaSiteKey:
                  description: 'Site key do Google reCAPTCHA'
                  type: string
              type: object
      responses:
        '200':
          description: 'Login bem sucedido'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Login realizado com sucesso.\",\r\n                        \"data\": {\r\n                            \"token\": \"string-com-token-de-autenticacao\",\r\n                            \"refreshToken\": \"string-com-token-de-atualizacao\"\r\n                        }\r\n                    }"
  /:
    get:
      tags:
        - Status
      summary: 'Verifica o status da API'
      description: 'Endpoint usado para checar se a API está em funcionamento'
      operationId: b398e747a4fa88288e2bd24ada43f386
      responses:
        '200':
          description: 'API operacional'
          content:
            application/json:
              schema: {  }
              example: '{"status":"success","message":"API on!"}'
  /notifications/push_channels:
    get:
      tags:
        - Notifications
      summary: 'Retorna os canais permitidos para enviar notificações push'
      description: 'Retorna os canais permitidos para enviar notificações push'
      operationId: 791ed7415ef365502f98ef598a889345
      responses:
        '200':
          description: 'Canais permitidos.'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Push Channels.\",\r\n                        \"data\": [\r\n                            \"channelID1\",\r\n                            \"channelID2\",\r\n                            \"channelIDN\"\r\n                        ]\r\n                    }"
      security:
        -
          BearerAuth: []
  /notifications/send_push_to_device:
    post:
      tags:
        - Notifications
      summary: 'Realiza o envio de notificações push para um dispositivo/usuário'
      description: 'Realiza o envio de notificações push para um dispositivo/usuário'
      operationId: 6793b42da9b55169ce711ed557e856b3
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - channelId
                - deviceToken
                - title
                - body
                - link
              properties:
                channelId:
                  description: 'Canal da notificação push (/notifications/push_channels retorna os permitidos)'
                  type: string
                deviceToken:
                  description: 'Id firebase do device/usuário que receberá a notificação push.'
                  type: string
                title:
                  description: 'Titulo da notificação push'
                  type: string
                body:
                  description: 'Corpo da notificação push (se omitida, será o mesmo que o titulo)'
                  type: string
                link:
                  description: 'Url ou link que aplicação abrirá ao tocar (ação) na notificação push. Pode ser omitido.'
                  type: string
              type: object
      responses:
        '201':
          description: 'Notificação Push enviada'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Notificação push enviada com sucesso para DEVICETOKENAQUI.\",\r\n                        \"data\": {\r\n                            \"name\": \"projects/projectname-3as234/messages/6587734535230942853\"\r\n                        }\r\n                    }"
      security:
        -
          BearerAuth: []
  /notifications/send_push_to_all:
    post:
      tags:
        - Notifications
      summary: 'Realiza o envio de notificações push para todos os dispositivos/usuários'
      description: 'Realiza o envio de notificações push para todos os dispositivos/usuários'
      operationId: eb8f9c8c8fcf3bd428c433145e1d6630
      requestBody:
        description: 'Corpo da requisição'
        required: true
        content:
          application/json:
            schema:
              required:
                - channelId
                - title
                - body
                - link
              properties:
                channelId:
                  description: 'Canal da notificação push (/notifications/push_channels retorna os permitidos)'
                  type: string
                title:
                  description: 'Titulo da notificação push'
                  type: string
                body:
                  description: 'Corpo da notificação push (se omitida, será o mesmo que o titulo)'
                  type: string
                link:
                  description: 'Url ou link que aplicação abrirá ao tocar (ação) na notificação push. Pode ser omitido.'
                  type: string
              type: object
      responses:
        '201':
          description: 'Notificação Push enviada'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Notificação push enviada com sucesso para CHANNELIDAQUI.\",\r\n                        \"data\": {\r\n                            \"name\": \"projects/projectname-3as234/messages/6587734535230942853\"\r\n                        }\r\n                    }"
      security:
        -
          BearerAuth: []
  /users/me:
    get:
      tags:
        - Users
      summary: 'Retorna os dados do usuário logado'
      description: 'Retorna os dados do usuário logado'
      operationId: 3a7ca55a76dc121f4fcc6f9dd659add1
      responses:
        '200':
          description: 'Dados do usuário'
          content:
            application/json:
              schema: {  }
              example: "{\r\n                        \"status\": \"success\",\r\n                        \"message\": \"Sucesso.\",\r\n                        \"data\": {\r\n                            \"nome\": \"José\",\r\n                            \"sobrenome\": \"Silva\",\r\n                            \"email\": \"jSilva@gmail.com\",\r\n                            \"photoBlob\": null,\r\n                            \"ultimoAcesso\": \"2025-10-09 18:03:23\",\r\n                            \"criadoEm\": \"2025-10-09 14:32:15\",\r\n                            \"alteradoEm\": \"2025-10-09 14:32:15\",\r\n                            \"isContaGoogle\": false\r\n                        }\r\n                    }"
      security:
        -
          BearerAuth: []
    patch:
      tags:
        - Users
      summary: 'Atualiza os dados do usuário logado'
      description: 'Atualiza as informações do usuário autenticado. Nenhum campo do corpo da requisição é obrigatório; é possível atualizar apenas alguns dados, como o nome, sobrenome ou senha, conforme necessário. Você pode alterar um ou mais campos sem a necessidade de atualizar todos.'
      operationId: cfbd9e6cafd4189c5406cc6530afff2c
      requestBody:
        description: 'Corpo da requisição'
        required: false
        content:
          application/json:
            schema:
              required:
                - name
                - lastname
                - password
                - photoBlob
                - isRemovePhoto
              properties:
                name:
                  description: 'Nome do usuário'
                  type: string
                lastname:
                  description: 'Sobrenome do usuário'
                  type: string
                password:
                  description: 'Senha do usuário'
                  type: string
                photoBlob:
                  description: 'Foto do usuário blob em base64'
                  type: string
                isRemovePhoto:
                  description: 'Se true remove a foto do usuário'
                  type: boolean
              type: object
      responses:
        '204':
          description: 'Dados do usuário atualizados com sucesso'
      security:
        -
          BearerAuth: []
components:
  securitySchemes:
    BearerAuth:
      type: http
      description: 'Bearer JWT Token para autenticação'
      bearerFormat: JWT
      scheme: bearer
tags:
  -
    name: Status
    description: 'Endpoints de status'
  -
    name: Auth
    description: 'Endpoints de autenticação'
  -
    name: Users
    description: 'Endpoints de usuário'
  -
    name: Notifications
    description: 'Endpoints de notificações'
